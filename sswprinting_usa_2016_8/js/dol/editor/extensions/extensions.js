
svgEditor.addExtension("Markers",function(S){var svgcontent=S.svgcontent,addElem=S.addSvgElementFromJson,selElems;console.log("svgEditor.curConfig.imgPath");var mtypes=['start','mid','end'];var marker_prefix='se_marker_';var id_prefix='mkr_';var marker_types={nomarker:{},leftarrow:{element:'path',attr:{d:'M0,50 L100,90 L70,50 L100,10 Z'}},rightarrow:{element:'path',attr:{d:'M100,50 L0,90 L30,50 L0,10 Z'}},textmarker:{element:'text',attr:{x:0,y:0,'stroke-width':0,'stroke':'none','font-size':75,'font-family':'serif','text-anchor':'left','xml:space':'preserve'}},forwardslash:{element:'path',attr:{d:'M30,100 L70,0'}},reverseslash:{element:'path',attr:{d:'M30,0 L70,100'}},verticalslash:{element:'path',attr:{d:'M50,0 L50,100'}},box:{element:'path',attr:{d:'M20,20 L20,80 L80,80 L80,20 Z'}},star:{element:'path',attr:{d:'M10,30 L90,30 L20,90 L50,10 L80,90 Z'}},xmark:{element:'path',attr:{d:'M20,80 L80,20 M80,80 L20,20'}},triangle:{element:'path',attr:{d:'M10,80 L50,20 L80,80 Z'}},mcircle:{element:'circle',attr:{r:30,cx:50,cy:50}},}
var lang_list={"en":[{id:"start_marker_list",title:"Select start marker type"},{id:"mid_marker_list",title:"Select mid marker type"},{id:"end_marker_list",title:"Select end marker type"},{id:"nomarker",title:"No Marker"},{id:"leftarrow",title:"Left Arrow"},{id:"rightarrow",title:"Right Arrow"},{id:"textmarker",title:"Text Marker"},{id:"forwardslash",title:"Forward Slash"},{id:"reverseslash",title:"Reverse Slash"},{id:"verticalslash",title:"Vertical Slash"},{id:"box",title:"Box"},{id:"star",title:"Star"},{id:"xmark",title:"X"},{id:"triangle",title:"Triangle"},{id:"mcircle",title:"Circle"},{id:"leftarrow_o",title:"Open Left Arrow"},{id:"rightarrow_o",title:"Open Right Arrow"},{id:"box_o",title:"Open Box"},{id:"star_o",title:"Open Star"},{id:"triangle_o",title:"Open Triangle"},{id:"mcircle_o",title:"Open Circle"},]};$j.each(['leftarrow','rightarrow','box','star','mcircle','triangle'],function(i,v){marker_types[v+'_o']=marker_types[v];});function getLinked(elem,attr){var str=elem.getAttribute(attr);if(!str)return null;var m=str.match(/\(\#(.*)\)/);if(!m||m.length!==2){return null;}
return S.getElem(m[1]);}
function showPanel(on){$j('.marker_panel').toggle(on);if(on){var el=selElems[0];var val;var ci;$j.each(mtypes,function(i,pos){var m=getLinked(el,"marker-"+pos);var txtbox=$j('#'+pos+'_marker');if(!m){val='\\nomarker';ci=val;txtbox.hide()}else{if(!m.attributes.se_type)return;val='\\'+m.attributes.se_type.textContent;ci=val;if(val=='\\textmarker'){val=m.lastChild.textContent;}else{txtbox.hide()}}
txtbox.val(val);setIcon(pos,ci);})}
if(selElems[0]!=null&&selElems[0]!=false){if(selElems[0].getAttribute('lock')!='true'){$j('.marker_panel').toggle(on);}else{$j('.marker_panel').toggle(false);}}}
function addMarker(id,val){var txt_box_bg='#ffffff';var txt_box_border='none';var txt_box_stroke_width=0;var marker=S.getElem(id);if(marker)return;if(val==''||val=='\\nomarker')return;var el=selElems[0];var color=el.getAttribute('stroke');var refX=50;var refY=50;var viewBox="0 0 100 100";var markerWidth=5;var markerHeight=5;var strokeWidth=10;if(val.substr(0,1)=='\\')se_type=val.substr(1);else se_type='textmarker';if(!marker_types[se_type])return;marker=addElem({"element":"marker","attr":{"id":id,"markerUnits":"strokeWidth","orient":"auto","style":"pointer-events:none","se_type":se_type}});if(se_type!='textmarker'){var mel=addElem(marker_types[se_type]);var fillcolor=color;if(se_type.substr(-2)=='_o')fillcolor='none';mel.setAttribute('fill',fillcolor);mel.setAttribute('stroke',color);mel.setAttribute('stroke-width',strokeWidth);marker.appendChild(mel);}else{var text=addElem(marker_types[se_type]);text.textContent=val;var tb=text.getBBox();var pad=1;var bb=tb;bb.x=0;bb.y=0;bb.width+=pad*2;bb.height+=pad*2;text.setAttribute('x',pad);text.setAttribute('y',bb.height-pad-tb.height/4);text.setAttribute('fill',color);refX=bb.width/2+pad;refY=bb.height/2+pad;viewBox=bb.x+" "+bb.y+" "+bb.width+" "+bb.height;markerWidth=bb.width/10;markerHeight=bb.height/10;var box=addElem({"element":"rect","attr":{"x":bb.x,"y":bb.y,"width":bb.width,"height":bb.height,"fill":txt_box_bg,"stroke":txt_box_border,"stroke-width":txt_box_stroke_width}});marker.setAttribute("orient",0);marker.appendChild(box);marker.appendChild(text);}
marker.setAttribute("viewBox",viewBox);marker.setAttribute("markerWidth",markerWidth);marker.setAttribute("markerHeight",markerHeight);marker.setAttribute("refX",refX);marker.setAttribute("refY",refY);S.findDefs().appendChild(marker);return marker;}
function setMarker(){var poslist={'start_marker':'start','mid_marker':'mid','end_marker':'end'};var pos=poslist[this.id];var marker_name='marker-'+pos;var val=this.value;var el=selElems[0];var marker=getLinked(el,marker_name);if(marker)$j(marker).remove();el.removeAttribute(marker_name);if(val=='')val='\\nomarker';if(val=='\\nomarker'){setIcon(pos,val);S.call("changed",selElems);return;}
var id=marker_prefix+pos+'_'+el.id;addMarker(id,val);svgCanvas.changeSelectedAttribute(marker_name,"url(#"+id+")");if(el.tagName=="line"&&pos=='mid')el=convertline(el);S.call("changed",selElems);setIcon(pos,val);}
function convertline(elem){if(!(elem.tagName=="line"))return elem;var x1=elem.getAttribute('x1')-0;var x2=elem.getAttribute('x2')-0;var y1=elem.getAttribute('y1')-0;var y2=elem.getAttribute('y2')-0;var id=elem.id;var mid_pt=(' '+((x1+x2)/2)+','+((y1+y2)/2)+' ');var pline=addElem({"element":"polyline","attr":{"points":(x1+','+y1+mid_pt+x2+','+y2),"stroke":elem.getAttribute('stroke'),"stroke-width":elem.getAttribute('stroke-width'),"fill":"none","opacity":elem.getAttribute('opacity')||1}});$j.each(mtypes,function(i,pos){var nam='marker-'+pos;var m=elem.getAttribute(nam);if(m)pline.setAttribute(nam,elem.getAttribute(nam));});var batchCmd=new S.BatchCommand();batchCmd.addSubCommand(new S.RemoveElementCommand(elem,elem.parentNode));batchCmd.addSubCommand(new S.InsertElementCommand(pline));$j(elem).after(pline).remove();svgCanvas.clearSelection();pline.id=id;svgCanvas.addToSelection([pline]);S.addCommandToHistory(batchCmd);return pline;}
function colorChanged(elem){var color=elem.getAttribute('stroke');$j.each(mtypes,function(i,pos){var marker=getLinked(elem,'marker-'+pos);if(!marker)return;if(!marker.attributes.se_type)return;var ch=marker.lastElementChild;if(!ch)return;var curfill=ch.getAttribute("fill");var curstroke=ch.getAttribute("stroke")
if(curfill&&curfill!='none')ch.setAttribute("fill",color);if(curstroke&&curstroke!='none')ch.setAttribute("stroke",color);});}
function updateReferences(el){$j.each(mtypes,function(i,pos){var id=marker_prefix+pos+'_'+el.id;var marker_name='marker-'+pos;var marker=getLinked(el,marker_name);if(!marker||!marker.attributes.se_type)return;var url=el.getAttribute(marker_name);if(url){var len=el.id.length;var linkid=url.substr(-len-1,len);if(el.id!=linkid){var val=$j('#'+pos+'_marker').attr('value');addMarker(id,val);svgCanvas.changeSelectedAttribute(marker_name,"url(#"+id+")");if(el.tagName=="line"&&pos=='mid')el=convertline(el);S.call("changed",selElems);}}});}
function triggerTextEntry(pos,val){$j('#'+pos+'_marker').val(val);$j('#'+pos+'_marker').change();var txtbox=$j('#'+pos+'_marker');}
function setIcon(pos,id){if(id.substr(0,1)!='\\')id='\\textmarker'
var ci='#'+id_prefix+pos+'_'+id.substr(1);svgEditor.setIcon('#cur_'+pos+'_marker_list',$j(ci).children());$j(ci).addClass('current').siblings().removeClass('current');}
function setMarkerSet(obj){var parts=this.id.split('_');var set=parts[2];switch(set){case'off':triggerTextEntry('start','\\nomarker');triggerTextEntry('mid','\\nomarker');triggerTextEntry('end','\\nomarker');break;case'dimension':triggerTextEntry('start','\\leftarrow');triggerTextEntry('end','\\rightarrow');showTextPrompt('mid');break;case'label':triggerTextEntry('mid','\\nomarker');triggerTextEntry('end','\\rightarrow');showTextPrompt('start');break;}}
function showTextPrompt(pos){var def=$j('#'+pos+'_marker').val();if(def.substr(0,1)=='\\')def='';$j.prompt('Enter text for '+pos+' marker',def,function(txt){if(txt)triggerTextEntry(pos,txt);});}
function setArrowFromButton(obj){var parts=this.id.split('_');var pos=parts[1];var val=parts[2];if(parts[3])val+='_'+parts[3];if(val!='textmarker'){triggerTextEntry(pos,'\\'+val);}else{showTextPrompt(pos);}}
function getTitle(lang,id){var list=lang_list[lang];for(var i in list){if(list[i].id==id)return list[i].title;}
return id;}
function buildButtonList(){var buttons=[];var i=0;$j.each(mtypes,function(k,pos){var listname=pos+"_marker_list";var def=true;$j.each(marker_types,function(id,v){var title=getTitle('en',id);buttons.push({id:id_prefix+pos+"_"+id,svgicon:id,title:title,type:'context',events:{'click':setArrowFromButton},panel:'marker_panel',list:listname,isDefault:def});def=false;});});return buttons;}
return{name:"Markers",svgicons:svgEditor.curConfig.extPath+"markers-icons.xml",buttons:buildButtonList(),context_tools:[{type:"input",panel:"marker_panel",title:"Start marker",id:"start_marker",label:"s",size:3,events:{change:setMarker}},{type:"button-select",panel:"marker_panel",title:getTitle('en','start_marker_list'),id:"start_marker_list",colnum:3,events:{change:setArrowFromButton}},{type:"input",panel:"marker_panel",title:"Middle marker",id:"mid_marker",label:"m",defval:"",size:3,events:{change:setMarker}},{type:"button-select",panel:"marker_panel",title:getTitle('en','mid_marker_list'),id:"mid_marker_list",colnum:3,events:{change:setArrowFromButton}},{type:"input",panel:"marker_panel",title:"End marker",id:"end_marker",label:"e",size:3,events:{change:setMarker}},{type:"button-select",panel:"marker_panel",title:getTitle('en','end_marker_list'),id:"end_marker_list",colnum:3,events:{change:setArrowFromButton}}],callback:function(){$j('#marker_panel').addClass('toolset').hide();},addLangData:function(lang){return{data:lang_list[lang]};},selectedChanged:function(opts){selElems=opts.elems;var i=selElems.length;var marker_elems=['line','path','polyline','polygon'];while(i--){var elem=selElems[i];if(elem&&$j.inArray(elem.tagName,marker_elems)!=-1){if(opts.selectedElement&&!opts.multiselected){showPanel(true);}else{showPanel(false);}}else{showPanel(false);}}},elementChanged:function(opts){var elem=opts.elems[0];if(elem&&(elem.getAttribute("marker-start")||elem.getAttribute("marker-mid")||elem.getAttribute("marker-end"))){colorChanged(elem);updateReferences(elem);}
changing_flag=false;}};});svgEditor.addExtension("shapes",function(){var current_d,cur_shape_id;var canv=svgEditor.canvas;var cur_shape;var start_x,start_y;var svgroot=canv.getRootElem();var lastBBox={};var categories={basic:'Basic',object:'Objects',symbol:'Symbols',arrow:'Arrows',flowchart:'Flowchart',animal:'Animals',game:'Cards & Chess',dialog_balloon:'Dialog balloons',electronics:'Electronics',math:'Mathematical',music:'Music',misc:'Miscellaneous',raphael_1:'raphaeljs.com set 1',raphael_2:'raphaeljs.com set 2'};var library={'basic':{data:{'heart':'m150,73c61,-175 300,0 0,225c-300,-225 -61,-400 0,-225z','frame':'m0,0l300,0l0,300l-300,0zm35,-265l0,230l230,0l0,-230z','donut':'m1,150l0,0c0,-82.29042 66.70958,-149 149,-149l0,0c39.51724,0 77.41599,15.69816 105.35889,43.64108c27.94293,27.94293 43.64111,65.84165 43.64111,105.35892l0,0c0,82.29041 -66.70958,149 -149,149l0,0c-82.29041,0 -149,-66.70959 -149,-149zm74.5,0l0,0c0,41.1452 33.35481,74.5 74.5,74.5c41.14522,0 74.5,-33.3548 74.5,-74.5c0,-41.1452 -33.3548,-74.5 -74.5,-74.5l0,0c-41.14519,0 -74.5,33.35481 -74.5,74.5z',"triangle":"m1,280.375l149,-260.75l149,260.75z","right_triangle":"m1,299l0,-298l298,298z","diamond":"m1,150l149,-149l149,149l-149,149l-149,-149z","pentagon":"m1.00035,116.97758l148.99963,-108.4053l148.99998,108.4053l-56.91267,175.4042l-184.1741,0l-56.91284,-175.4042z","hexagon":"m1,149.99944l63.85715,-127.71428l170.28572,0l63.85713,127.71428l-63.85713,127.71428l-170.28572,0l-63.85715,-127.71428z","septagon1":"m0.99917,191.06511l29.51249,-127.7108l119.48833,-56.83673l119.48836,56.83673l29.51303,127.7108l-82.69087,102.41679l-132.62103,0l-82.69031,-102.41679z","heptagon":"m1,88.28171l87.28172,-87.28171l123.43653,0l87.28172,87.28171l0,123.43654l-87.28172,87.28172l-123.43653,0l-87.28172,-87.28172l0,-123.43654z","decagon":"m1,150.00093l28.45646,-88.40318l74.49956,-54.63682l92.08794,0l74.50002,54.63682l28.45599,88.40318l-28.45599,88.40318l-74.50002,54.63681l-92.08794,0l-74.49956,-54.63681l-28.45646,-88.40318z","dodecagon":"m1,110.07421l39.92579,-69.14842l69.14842,-39.92579l79.85159,0l69.14842,39.92579l39.92578,69.14842l0,79.85159l-39.92578,69.14842l-69.14842,39.92578l-79.85159,0l-69.14842,-39.92578l-39.92579,-69.14842l0,-79.85159z","star_points_5":"m1,116.58409l113.82668,0l35.17332,-108.13487l35.17334,108.13487l113.82666,0l-92.08755,66.83026l35.17514,108.13487l-92.08759,-66.83208l-92.08757,66.83208l35.17515,-108.13487l-92.08758,-66.83026z","trapezoid":"m1,299l55.875,-298l186.25001,0l55.87498,298z","arrow_up":"m1.49805,149.64304l148.50121,-148.00241l148.50121,148.00241l-74.25061,0l0,148.71457l-148.5012,0l0,-148.71457z","vertical_scrool":"m37.375,261.625l0,-242.9375l0,0c0,-10.32083 8.36669,-18.6875 18.6875,-18.6875l224.25,0c10.32083,0 18.6875,8.36667 18.6875,18.6875c0,10.32081 -8.36667,18.6875 -18.6875,18.6875l-18.6875,0l0,242.9375c0,10.32083 -8.36668,18.6875 -18.6875,18.6875l-224.25,0l0,0c-10.32083,0 -18.6875,-8.36667 -18.6875,-18.6875c0,-10.32083 8.36667,-18.6875 18.6875,-18.6875zm37.375,-261.625l0,0c10.32081,0 18.6875,8.36667 18.6875,18.6875c0,10.32081 -8.36669,18.6875 -18.6875,18.6875c-5.1604,0 -9.34375,-4.18335 -9.34375,-9.34375c0,-5.16041 4.18335,-9.34375 9.34375,-9.34375l18.6875,0m186.875,18.6875l-205.5625,0m-37.375,224.25l0,0c5.1604,0 9.34375,4.18335 9.34375,9.34375c0,5.1604 -4.18335,9.34375 -9.34375,9.34375l18.6875,0m-18.6875,18.6875l0,0c10.32081,0 18.6875,-8.36667 18.6875,-18.6875l0,-18.6875","smiley":"m68.49886,214.78838q81.06408,55.67332 161.93891,0m-144.36983,-109.9558c0,-8.60432 6.97517,-15.57949 15.57948,-15.57949c8.60431,0 15.57948,6.97517 15.57948,15.57949c0,8.60431 -6.97517,15.57947 -15.57948,15.57947c-8.60431,0 -15.57948,-6.97516 -15.57948,-15.57947m95.83109,0c0,-8.60432 6.97517,-15.57949 15.57948,-15.57949c8.60431,0 15.57947,6.97517 15.57947,15.57949c0,8.60431 -6.97516,15.57947 -15.57947,15.57947c-8.60429,0 -15.57948,-6.97516 -15.57948,-15.57947m-181.89903,44.73038l0,0c0,-82.60133 66.96162,-149.56296 149.56296,-149.56296c82.60135,0 149.56296,66.96162 149.56296,149.56296c0,82.60135 -66.96161,149.56296 -149.56296,149.56296c-82.60133,0 -149.56296,-66.96161 -149.56296,-149.56296zm0,0l0,0c0,-82.60133 66.96162,-149.56296 149.56296,-149.56296c82.60135,0 149.56296,66.96162 149.56296,149.56296c0,82.60135 -66.96161,149.56296 -149.56296,149.56296c-82.60133,0 -149.56296,-66.96161 -149.56296,-149.56296z","left_braket":"m174.24565,298.5c-13.39009,0 -24.24489,-1.80908 -24.24489,-4.04065l0,-140.4187c0,-2.23158 -10.85481,-4.04065 -24.2449,-4.04065l0,0c13.39009,0 24.2449,-1.80907 24.2449,-4.04065l0,-140.4187l0,0c0,-2.23159 10.8548,-4.04066 24.24489,-4.04066","uml_actor":"m40.5,100l219,0m-108.99991,94.00006l107,105m-107.00009,-106.00006l-100,106m99.5,-231l0,125m33.24219,-158.75781c0,18.35916 -14.88303,33.24219 -33.24219,33.24219c-18.35916,0 -33.2422,-14.88303 -33.2422,-33.24219c0.00002,-18.35915 14.88304,-33.24219 33.2422,-33.24219c18.35916,0 33.24219,14.88304 33.24219,33.24219z","dialog_balloon_1":"m0.99786,35.96579l0,0c0,-19.31077 15.28761,-34.96524 34.14583,-34.96524l15.52084,0l0,0l74.50001,0l139.68748,0c9.05606,0 17.74118,3.68382 24.14478,10.24108c6.40356,6.55726 10.00107,15.45081 10.00107,24.72416l0,87.41311l0,0l0,52.44785l0,0c0,19.31078 -15.2876,34.96524 -34.14584,34.96524l-139.68748,0l-97.32507,88.90848l22.82506,-88.90848l-15.52084,0c-18.85822,0 -34.14583,-15.65446 -34.14583,-34.96524l0,0l0,-52.44785l0,0z","cloud":"m182.05086,34.31005c-0.64743,0.02048 -1.27309,0.07504 -1.92319,0.13979c-10.40161,1.03605 -19.58215,7.63722 -24.24597,17.4734l-2.47269,7.44367c0.53346,-2.57959 1.35258,-5.08134 2.47269,-7.44367c-8.31731,-8.61741 -19.99149,-12.59487 -31.52664,-10.72866c-11.53516,1.8662 -21.55294,9.3505 -27.02773,20.19925c-15.45544,-9.51897 -34.72095,-8.94245 -49.62526,1.50272c-14.90431,10.44516 -22.84828,28.93916 -20.43393,47.59753l1.57977,7.58346c-0.71388,-2.48442 -1.24701,-5.01186 -1.57977,-7.58346l-0.2404,0.69894c-12.95573,1.4119 -23.58103,11.46413 -26.34088,24.91708c-2.75985,13.45294 2.9789,27.25658 14.21789,34.21291l17.54914,4.26352c-6.1277,0.50439 -12.24542,-0.9808 -17.54914,-4.26352c-8.66903,9.71078 -10.6639,24.08736 -4.94535,35.96027c5.71854,11.87289 17.93128,18.70935 30.53069,17.15887l7.65843,-2.02692c-2.46413,1.0314 -5.02329,1.70264 -7.65843,2.02692c7.15259,13.16728 19.01251,22.77237 32.93468,26.5945c13.92217,3.82214 28.70987,1.56322 41.03957,-6.25546c10.05858,15.86252 27.91113,24.19412 45.81322,21.38742c17.90208,-2.8067 32.66954,-16.26563 37.91438,-34.52742l1.82016,-10.20447c-0.27254,3.46677 -0.86394,6.87508 -1.82016,10.20447c12.31329,8.07489 27.80199,8.52994 40.52443,1.18819c12.72244,-7.34175 20.6609,-21.34155 20.77736,-36.58929l-4.56108,-22.7823l-17.96776,-15.41455c13.89359,8.70317 22.6528,21.96329 22.52884,38.19685c16.5202,0.17313 30.55292,-13.98268 36.84976,-30.22897c6.29684,-16.24631 3.91486,-34.76801 -6.2504,-48.68089c4.21637,-10.35873 3.96622,-22.14172 -0.68683,-32.29084c-4.65308,-10.14912 -13.23602,-17.69244 -23.55914,-20.65356c-2.31018,-13.45141 -11.83276,-24.27162 -24.41768,-27.81765c-12.58492,-3.54603 -25.98557,0.82654 -34.41142,11.25287l-5.11707,8.63186c1.30753,-3.12148 3.01521,-6.03101 5.11707,-8.63186c-5.93959,-8.19432 -15.2556,-12.8181 -24.96718,-12.51096z","cylinder":"m299.0007,83.77844c0,18.28676 -66.70958,33.11111 -149.00002,33.11111m149.00002,-33.11111l0,0c0,18.28676 -66.70958,33.11111 -149.00002,33.11111c-82.29041,0 -148.99997,-14.82432 -148.99997,-33.11111m0,0l0,0c0,-18.28674 66.70956,-33.1111 148.99997,-33.1111c82.29044,0 149.00002,14.82436 149.00002,33.1111l0,132.44449c0,18.28674 -66.70958,33.11105 -149.00002,33.11105c-82.29041,0 -148.99997,-14.82431 -148.99997,-33.11105z","arrow_u_turn":"m1.00059,299.00055l0,-167.62497l0,0c0,-72.00411 58.37087,-130.37499 130.375,-130.37499l0,0l0,0c34.57759,0 67.73898,13.7359 92.18906,38.18595c24.45006,24.45005 38.18593,57.61144 38.18593,92.18904l0,18.625l37.24997,0l-74.49995,74.50002l-74.50002,-74.50002l37.25,0l0,-18.625c0,-30.8589 -25.0161,-55.87498 -55.87498,-55.87498l0,0l0,0c-30.85892,0 -55.875,25.01608 -55.875,55.87498l0,167.62497z","arrow_left_up":"m0.99865,224.5l74.50004,-74.5l0,37.25l111.74991,0l0,-111.75l-37.25,0l74.5,-74.5l74.5,74.5l-37.25,0l0,186.25l-186.24989,0l0,37.25l-74.50005,-74.5z","maximize":"m1.00037,150.34581l55.30305,-55.30267l0,27.65093l22.17356,0l0,-44.21833l44.21825,0l0,-22.17357l-27.65095,0l55.30267,-55.30292l55.3035,55.30292l-27.65175,0l0,22.17357l44.21835,0l0,44.21833l22.17357,0l0,-27.65093l55.30345,55.30267l-55.30345,55.3035l0,-27.65175l-22.17357,0l0,44.21834l-44.21835,0l0,22.17355l27.65175,0l-55.3035,55.30348l-55.30267,-55.30348l27.65095,0l0,-22.17355l-44.21825,0l0,-44.21834l-22.17356,0l0,27.65175l-55.30305,-55.3035z","cross":"m0.99844,99.71339l98.71494,0l0,-98.71495l101.26279,0l0,98.71495l98.71495,0l0,101.2628l-98.71495,0l0,98.71494l-101.26279,0l0,-98.71494l-98.71494,0z","plaque":"m-0.00197,49.94376l0,0c27.5829,0 49.94327,-22.36036 49.94327,-49.94327l199.76709,0l0,0c0,27.5829 22.36037,49.94327 49.94325,49.94327l0,199.7671l0,0c-27.58289,0 -49.94325,22.36034 -49.94325,49.94325l-199.76709,0c0,-27.58292 -22.36037,-49.94325 -49.94327,-49.94325z","page":"m249.3298,298.99744l9.9335,-39.73413l39.73413,-9.93355l-49.66763,49.66768l-248.33237,0l0,-298.00001l298.00001,0l0,248.33234"},buttons:[]}};var cur_lib=library.basic;var mode_id='shapelib';function loadIcons(){$j('#shape_buttons').empty();$j('#shape_buttons').append(cur_lib.buttons);}
function loadLibrary(cat_id){var lib=library[cat_id];if(!lib){$j('#shape_buttons').html('Loading...');$j.getJSON('/js/dol/editor/extensions/shapelib/'+cat_id+'.json',function(result,textStatus){cur_lib=library[cat_id]={data:result.data,size:result.size,fill:result.fill}
makeButtons(cat_id,result);loadIcons();});return;}
cur_lib=lib;if(!lib.buttons.length)makeButtons(cat_id,lib);loadIcons();}
function makeButtons(cat,shapes){var size=cur_lib.size||300;var fill=cur_lib.fill||false;var off=size*.05;var vb=[-off,-off,size+off*2,size+off*2].join(' ');var stroke=fill?0:(size/30);var shape_icon=new DOMParser().parseFromString('<svg xmlns="http://www.w3.org/2000/svg"><svg viewBox="'+vb+'"><path fill="'+(fill?'#333':'none')+'" stroke="#000000" stroke-width="'+stroke+'" /><\/svg><\/svg>','text/xml');var width=24;var height=24;shape_icon.documentElement.setAttribute('width',width);shape_icon.documentElement.setAttribute('height',height);var svg_elem=$j(document.importNode(shape_icon.documentElement,true));var data=shapes.data;cur_lib.buttons=[];for(var id in data){var path_d=data[id];var icon=svg_elem.clone();icon.find('path').attr('d',path_d);var icon_btn=icon.wrap('<div class="tool_button">').parent().attr({id:mode_id+'_'+id,title:id});cur_lib.buttons.push(icon_btn[0]);}}
return{svgicons:svgEditor.curConfig.extPath+"ext-shapes.xml",buttons:[{id:"tool_shapelib",type:"mode_flyout",position:6,title:"Shape library",events:{"click":function(){canv.setMode(mode_id);}}}],callback:function(){$j('<style>').text('\
   #shape_buttons {\
    overflow: auto;\
    width: 180px;\
    max-height: 300px;\
    display: table-cell;\
    vertical-align: middle;\
   }\
   \
   #shape_cats {\
    min-width: 110px;\
    display: table-cell;\
    vertical-align: middle;\
    height: 300px;\
   }\
   #shape_cats > div {\
    line-height: 1em;\
    padding: .5em;\
    border:1px solid #B0B0B0;\
    background: #E8E8E8;\
    margin-bottom: -1px;\
   }\
   #shape_cats div:hover {\
    background: #FFFFCC;\
   }\
   #shape_cats div.current {\
    font-weight: bold;\
   }').appendTo('head');var btn_div=$j('<div id="shape_buttons">');$j('#tools_shapelib > *').wrapAll(btn_div);var shower=$j('#tools_shapelib_show');loadLibrary('basic');$j('#shape_buttons').mouseup(function(evt){var btn=$j(evt.target).closest('div.tool_button');if(!btn.length)return;var copy=btn.children().clone();shower.children(':not(.flyout_arrow_horiz)').remove();shower.append(copy).attr('data-curopt','#'+btn[0].id).mouseup();canv.setMode(mode_id);cur_shape_id=btn[0].id.substr((mode_id+'_').length);current_d=cur_lib.data[cur_shape_id];$j('.tools_flyout').fadeOut();});var shape_cats=$j('<div id="shape_cats">');var cat_str='';$j.each(categories,function(id,label){cat_str+='<div data-cat='+id+'>'+label+'</div>';});shape_cats.html(cat_str).children().bind('mouseup',function(){var catlink=$j(this);catlink.siblings().removeClass('current');catlink.addClass('current');loadLibrary(catlink.attr('data-cat'));return false;});shape_cats.children().eq(0).addClass('current');$j('#tools_shapelib').append(shape_cats);shower.mouseup(function(){canv.setMode(current_d?mode_id:'select');});$j('#tool_shapelib').remove();var h=$j('#tools_shapelib').height();$j('#tools_shapelib').css({'margin-top':-(h/2-15),'margin-left':3});},mouseDown:function(opts){var mode=canv.getMode();if(mode!==mode_id)return;var e=opts.event;var x=start_x=opts.start_x;var y=start_y=opts.start_y;var cur_style=canv.getStyle();cur_shape=canv.addSvgElementFromJson({"element":"path","curStyles":true,"attr":{"d":current_d,"id":canv.getNextId(),"opacity":cur_style.opacity/2,"style":"pointer-events:none"}});if(/[a-z]/.test(current_d)){current_d=cur_lib.data[cur_shape_id]=canv.pathActions.convertPath(cur_shape);cur_shape.setAttribute('d',current_d);canv.pathActions.fixEnd(cur_shape);}
cur_shape.setAttribute('transform',"translate("+x+","+y+") scale(0.005) translate("+-x+","+-y+")");canv.recalculateDimensions(cur_shape);var tlist=canv.getTransformList(cur_shape);lastBBox=cur_shape.getBBox();return{started:true}},mouseMove:function(opts){var mode=canv.getMode();if(mode!==mode_id)return;var zoom=canv.getZoom();var evt=opts.event
var x=opts.mouse_x/zoom;var y=opts.mouse_y/zoom;var tlist=canv.getTransformList(cur_shape),box=cur_shape.getBBox(),left=box.x,top=box.y,width=box.width,height=box.height;var dx=(x-start_x),dy=(y-start_y);var newbox={'x':Math.min(start_x,x),'y':Math.min(start_y,y),'width':Math.abs(x-start_x),'height':Math.abs(y-start_y)};var ts=null,tx=0,ty=0,sy=height?(height+dy)/height:1,sx=width?(width+dx)/width:1;var sx=newbox.width/lastBBox.width;var sy=newbox.height/lastBBox.height;sx=sx||1;sy=sy||1;if(x<start_x){tx=lastBBox.width;}
if(y<start_y)ty=lastBBox.height;var translateOrigin=svgroot.createSVGTransform(),scale=svgroot.createSVGTransform(),translateBack=svgroot.createSVGTransform();translateOrigin.setTranslate(-(left+tx),-(top+ty));if(!evt.shiftKey){var max=Math.min(Math.abs(sx),Math.abs(sy));sx=max*(sx<0?-1:1);sy=max*(sy<0?-1:1);}
scale.setScale(sx,sy);translateBack.setTranslate(left+tx,top+ty);var N=tlist.numberOfItems;tlist.appendItem(translateBack);tlist.appendItem(scale);tlist.appendItem(translateOrigin);canv.recalculateDimensions(cur_shape);lastBBox=cur_shape.getBBox();},mouseUp:function(opts){var mode=canv.getMode();if(mode!==mode_id)return;if(opts.mouse_x==start_x&&opts.mouse_y==start_y){return{keep:false,element:cur_shape,started:false}}
canv.setMode('select');return{keep:true,element:cur_shape,started:false}}}});svgEditor.addExtension("imagelib",function(){var uiStrings=svgEditor.uiStrings;$j.extend(uiStrings,{imagelib:{select_lib:'Select an image library',show_list:'Show library list',import_single:'Import single',import_multi:'Import multiple',open:'Open as new document'}});var img_libs=[{name:'Demo library (local)',url:'extensions/imagelib/index.html',description:'Demonstration library for SVG-edit on this server'},{name:'IAN Symbol Libraries',url:'http://ian.umces.edu/symbols/catalog/svgedit/album_chooser.php',description:'Free library of illustrations'}];var xlinkns="http://www.w3.org/1999/xlink";function closeBrowser(){$j('#imgbrowse_holder').hide();}
function importImage(url){var newImage=svgCanvas.addSvgElementFromJson({"element":"image","attr":{"x":0,"y":0,"width":0,"height":0,"id":svgCanvas.getNextId(),"style":"pointer-events:inherit"}});svgCanvas.clearSelection();svgCanvas.addToSelection([newImage]);svgCanvas.setImageURL(url);}
var mode='s';var multi_arr=[];var cur_meta;var tranfer_stopped=false;var pending={};window.addEventListener("message",function(evt){var response=evt.data;if(!response){return;}
var char1=response.charAt(0);var svg_str;var img_str;if(char1!="{"&&tranfer_stopped){tranfer_stopped=false;return;}
if(char1=='|'){var secondpos=response.indexOf('|',1);var id=response.substr(1,secondpos-1);response=response.substr(secondpos+1);char1=response.charAt(0);}
$j('#dialog_box').hide();switch(char1){case'{':tranfer_stopped=false;var cur_meta=JSON.parse(response);pending[cur_meta.id]=cur_meta;var name=(cur_meta.name||'file');var message=uiStrings.notification.retrieving.replace('%s',name);if(mode!='m'){$j.process_cancel(message,function(){tranfer_stopped=true;$j('#dialog_box').hide();});}else{var entry=$j('<div>'+message+'</div>').data('id',cur_meta.id);preview.append(entry);cur_meta.entry=entry;}
return;case'<':svg_str=true;break;case'd':if(response.indexOf('data:image/svg+xml')===0){var pre='data:image/svg+xml;base64,';var src=response.substring(pre.length);response=svgCanvas.Utils.decode64(src);svg_str=true;break;}else if(response.indexOf('data:image/')===0){img_str=true;break;}
default:if(mode!=='m'){closeBrowser();}else{pending[id].entry.remove();}
return;}
switch(mode){case's':if(svg_str){svgCanvas.importSvgString(response);}else if(img_str){importImage(response);}
closeBrowser();break;case'm':multi_arr.push([(svg_str?'svg':'img'),response]);var cur_meta=pending[id];if(svg_str){if(cur_meta&&cur_meta.name){var title=cur_meta.name;}else{var xml=new DOMParser().parseFromString(response,'text/xml').documentElement;var title=$j(xml).children('title').first().text()||'(SVG #'+response.length+')';}
if(cur_meta){preview.children().each(function(){if($j(this).data('id')==id){if(cur_meta.preview_url){$j(this).html('<img src="'+cur_meta.preview_url+'">'+title);}else{$j(this).text(title);}
submit.removeAttr('disabled');}});}else{preview.append('<div>'+title+'</div>');submit.removeAttr('disabled');}}else{if(cur_meta&&cur_meta.preview_url){var title=cur_meta.name||'';}
if(cur_meta&&cur_meta.preview_url){var entry='<img src="'+cur_meta.preview_url+'">'+title;}else{var entry='<img src="'+response+'">';}
if(cur_meta){preview.children().each(function(){if($j(this).data('id')==id){$j(this).html(entry);submit.removeAttr('disabled');}});}else{preview.append($j('<div>').append(entry));submit.removeAttr('disabled');}}
break;case'o':if(!svg_str)break;svgEditor.openPrep(function(ok){if(!ok)return;svgCanvas.clear();svgCanvas.setSvgString(response);});closeBrowser();break;}},true);var preview,submit;function toggleMulti(show){$j('#lib_framewrap, #imglib_opts').css({right:(show?200:10)});if(!preview){preview=$j('<div id=imglib_preview>').css({position:'absolute',top:45,right:10,width:180,bottom:45,background:'#fff',overflow:'auto'}).insertAfter('#lib_framewrap');submit=$j('<button disabled>Import selected</button>').appendTo('#imgbrowse').click(function(){$j.each(multi_arr,function(i){var type=this[0];var data=this[1];if(type=='svg'){svgCanvas.importSvgString(data);}else{importImage(data);}
svgCanvas.moveSelectedElements(i*20,i*20,false);});preview.empty();multi_arr=[];$j('#imgbrowse_holder').hide();}).css({position:'absolute',bottom:10,right:-10});}
preview.toggle(show);submit.toggle(show);}
function showBrowser(){var browser=$j('#imgbrowse');if(!browser.length){$j('<div id=imgbrowse_holder><div id=imgbrowse class=toolbar_button>\
      </div></div>').insertAfter('#svg_docprops');browser=$j('#imgbrowse');var all_libs=uiStrings.imagelib.select_lib;var lib_opts=$j('<ul id=imglib_opts>').appendTo(browser);var frame=$j('<iframe/>').prependTo(browser).hide().wrap('<div id=lib_framewrap>');var header=$j('<h1>').prependTo(browser).text(all_libs).css({position:'absolute',top:0,left:0,width:'100%'});var cancel=$j('<button>'+uiStrings.common.cancel+'</button>').appendTo(browser).click(function(){$j('#imgbrowse_holder').hide();}).css({position:'absolute',top:5,right:-10});var leftBlock=$j('<span>').css({position:'absolute',top:5,left:10}).appendTo(browser);var back=$j('<button hidden>'+uiStrings.imagelib.show_list+'</button>').appendTo(leftBlock).click(function(){frame.attr('src','about:blank').hide();lib_opts.show();header.text(all_libs);back.hide();}).css({'margin-right':5}).hide();var type=$j('<select><option value=s>'+
uiStrings.imagelib.import_single+'</option><option value=m>'+
uiStrings.imagelib.import_multi+'</option><option value=o>'+
uiStrings.imagelib.open+'</option></select>').appendTo(leftBlock).change(function(){mode=$j(this).val();switch(mode){case's':case'o':toggleMulti(false);break;case'm':toggleMulti(true);}}).css({'margin-top':10});cancel.prepend($j.getSvgIcon('cancel',true));back.prepend($j.getSvgIcon('tool_imagelib',true));$j.each(img_libs,function(i,opts){$j('<li>').appendTo(lib_opts).text(opts.name).click(function(){frame.attr('src',opts.url).show();header.text(opts.name);lib_opts.hide();back.show();}).append('<span>'+opts.description+'</span>');});}else{$j('#imgbrowse_holder').show();}}
return{svgicons:svgEditor.curConfig.extPath+"ext-imagelib.xml",buttons:[{id:"tool_imagelib",type:"app_menu",position:4,title:"Image library",events:{"mouseup":showBrowser}}],callback:function(){$j('<style>').text('\
       #imgbrowse_holder {\
        position: absolute;\
        top: 0;\
        left: 0;\
        width: 100%;\
        height: 100%;\
        background-color: rgba(0, 0, 0, .5);\
        z-index: 5;\
       }\
       \
       #imgbrowse {\
        position: absolute;\
        top: 25px;\
        left: 25px;\
        right: 25px;\
        bottom: 25px;\
        min-width: 300px;\
        min-height: 200px;\
        background: #B0B0B0;\
        border: 1px outset #777;\
       }\
       #imgbrowse h1 {\
        font-size: 20px;\
        margin: .4em;\
        text-align: center;\
       }\
       #lib_framewrap,\
       #imgbrowse > ul {\
        position: absolute;\
        top: 45px;\
        left: 10px;\
        right: 10px;\
        bottom: 10px;\
        background: white;\
        margin: 0;\
        padding: 0;\
       }\
       #imgbrowse > ul {\
        overflow: auto;\
       }\
       #imgbrowse > div {\
        border: 1px solid #666;\
       }\
       #imglib_preview > div {\
        padding: 5px;\
        font-size: 12px;\
       }\
       #imglib_preview img {\
        display: block;\
        margin: 0 auto;\
        max-height: 100px;\
       }\
       #imgbrowse li {\
        list-style: none;\
        padding: .5em;\
        background: #E8E8E8;\
        border-bottom: 1px solid #B0B0B0;\
        line-height: 1.2em;\
        font-style: sans-serif;\
        }\
       #imgbrowse li > span {\
        color: #666;\
        font-size: 15px;\
        display: block;\
        }\
       #imgbrowse li:hover {\
        background: #FFC;\
        cursor: pointer;\
        }\
       #imgbrowse iframe {\
        width: 100%;\
        height: 100%;\
        border: 0;\
       }\
      ').appendTo('head');}}});svgEditor.addExtension("view_grid",function(s){var svgdoc=document.getElementById("svgcanvas").ownerDocument,svgns="http://www.w3.org/2000/svg",dims=svgEditor.curConfig.dimensions,svgroot=s.svgroot;var showGrid=false;var assignAttributes=svgCanvas.assignAttributes;var hcanvas=document.createElement('canvas');$j(hcanvas).hide().appendTo('body');var canvasgrid=svgdoc.createElementNS(svgns,"svg");assignAttributes(canvasgrid,{'id':'canvasGrid','width':'100%','height':'100%','x':0,'y':0,'overflow':'visible','display':'none'});var canvBG=$j('#canvasBackground');canvBG.append(canvasgrid);var gridPattern=svgdoc.createElementNS(svgns,"pattern");assignAttributes(gridPattern,{'id':'gridpattern','patternUnits':'userSpaceOnUse','x':0,'y':0,'width':100,'height':100});var gridimg=svgdoc.createElementNS(svgns,"image");assignAttributes(gridimg,{'x':0,'y':0,'width':100,'height':100});gridPattern.appendChild(gridimg);canvBG.append(gridPattern);var gridBox=svgdoc.createElementNS(svgns,"rect");assignAttributes(gridBox,{'width':'100%','height':'100%','x':0,'y':0,'stroke-width':0,'stroke':'none','fill':'url(#gridpattern)','style':'pointer-events: none; display:visible;'});$j('#canvasGrid').append(gridBox);function updateGrid(zoom){var bgwidth=+canvBG.attr('width');var bgheight=+canvBG.attr('height');var units=svgedit.units.getTypeMap();var unit=units[svgEditor.curConfig.baseUnit];var r_intervals=[.01,.1,1,10,100,1000];var d=0;var is_x=(d===0);var dim=is_x?'x':'y';var lentype=is_x?'width':'height';var c_elem=svgCanvas.getContentElem();var content_d=c_elem.getAttribute(dim)-0;var hcanv=hcanvas;var u_multi=unit*zoom;var raw_m=100/u_multi;var multi=1;for(var i=0;i<r_intervals.length;i++){var num=r_intervals[i];multi=num;if(raw_m<=num){break;}}
var big_int=multi*u_multi;hcanv.width=big_int;hcanv.height=big_int;var ctx=hcanv.getContext("2d");var ruler_d=0;var cur_d=.5;var part=big_int/10;ctx.globalAlpha=0.2;ctx.strokeStyle="#000";for(var i=1;i<10;i++){var sub_d=Math.round(part*i)+.5;var line_num=0;ctx.moveTo(sub_d,big_int);ctx.lineTo(sub_d,line_num);ctx.moveTo(big_int,sub_d);ctx.lineTo(line_num,sub_d);}
ctx.stroke();ctx.beginPath();ctx.globalAlpha=0.5;ctx.moveTo(cur_d,big_int);ctx.lineTo(cur_d,0);ctx.moveTo(big_int,cur_d);ctx.lineTo(0,cur_d);ctx.stroke();var datauri=hcanv.toDataURL('image/png');gridimg.setAttribute('width',big_int);gridimg.setAttribute('height',big_int);gridimg.parentNode.setAttribute('width',big_int);gridimg.parentNode.setAttribute('height',big_int);svgCanvas.setHref(gridimg,datauri);}
return{name:"view_grid",svgicons:svgEditor.curConfig.extPath+"grid-icon.xml",zoomChanged:function(zoom){if(showGrid)updateGrid(zoom);},buttons:[{id:"view_grid",type:"context",panel:"editor_panel",title:"Show/Hide Grid",events:{'click':function(){var gr=!$j('#view_grid').hasClass('push_button_pressed');if(gr){svgEditor.curConfig.showGrid=showGrid=true;$j('#view_grid').addClass('push_button_pressed').removeClass('tool_button');$j('#canvasGrid').attr('display','normal');updateGrid(svgCanvas.getZoom());}
else{svgEditor.curConfig.showGrid=showGrid=false;$j('#view_grid').removeClass('push_button_pressed').addClass('tool_button');$j('#canvasGrid').attr('display','none');}}}}]};});svgEditor.addExtension("Flip tools",function(){var svgroot=svgCanvas.getRootElem();var selElems,showPanel=function(on){$j('#fliptool_panel').toggle(on);};var batchCmd;var selElemsb;function flipElement(type)
{var i=selElems.length;var BatchCommand=svgedit.history.BatchCommand;var ChangeElementCommand=svgedit.history.ChangeElementCommand;var batchCmd=new BatchCommand('Flip '+(type=='-'?'horizontal':'vertical'));while(i--){var elem=selElems[i];if(elem){var box=svgedit.utilities.getBBox(elem)
var x=box.x,y=box.y;var scale;if(elem.tagName=='image'||elem.tagName=='text'){if(elem.parentNode.tagName==="g"&&elem.parentNode.getAttribute('style')!=='pointer-events:all'){elem=elem.parentNode}}
if(elem.tagName=='image'||elem.tagName=='text'){svgCanvas.groupSelectedElements();}
$j('#selectorParentGroup g').hide();$j('#selectorGroup0').show();$j('#selectorGroup0 g').show();if(type=="-"){scale="scale(-1,1)";x+=(box.width/2);}
else{scale="scale(1,-1)";y+=(box.height/2);}
var attrib=elem.getAttribute('transform');if(attrib)
batchCmd.addSubCommand(new ChangeElementCommand(elem,{transform:attrib}));elem.setAttribute('transform',"translate("+x+","+y+") "+scale+" translate("+-x+","+-y+")");batchCmd.addSubCommand(svgCanvas.recalculateDimensions(elem));if(attrib){var re=/rotate\(([-+]?\d*(?:\.\d+)?)\,\s*([-+]?\d*(?:\.\d+)?)\,\s*([-+]?\d*(?:\.\d+)?)\)/i;var m=attrib.match(re);if(m){var rotation='rotate('+(0-parseFloat(m[1]))+', '+m[2]+', '+m[3]+')';elem.setAttribute('transform',attrib.replace(re,rotation));}
else
elem.setAttribute('transform',attrib);batchCmd.addSubCommand(new ChangeElementCommand(elem,{transform:elem.getAttribute('transform')}));}
flipGradients(elem,type);}}
if(!batchCmd.isEmpty())
svgCanvas.undoMgr.addCommandToHistory(batchCmd);console.log(elem.tagName);console.log(elem.getAttribute('style'));if(elem.tagName=='g'&&elem.getAttribute('style')!='pointer-events:all'){if(elem.firstChild.tagName=="image"||elem.tagName=='text'){svgCanvas.ungroupSelectedElement}}
var selectorManager=this.selectorManager=svgedit.select.getSelectorManager();var selector=selectorManager.requestSelector(elem);selector.resize();}
function flipAttrib(grad,attr1,attr2)
{if(attr2){var val1=grad.attr(attr1);var val2=grad.attr(attr2);if(val1!=null&&val2!=null){var changes=grad.attr([attr1,attr2]);grad.attr(attr1,val2);grad.attr(attr2,val1);if(batchCmd!=null)
batchCmd.addSubCommand(new ChangeElementCommand(grad[0],changes));}}
else{var val=grad.attr(attr1);if(val!=null)
{var changes=grad.attr([attr1]);grad.attr(attr1,1-val);if(batchCmd!=null)
batchCmd.addSubCommand(new ChangeElementCommand(grad[0],changes));}}}
function flipGradients(elem,type){flipGraident(elem,'stroke',type);flipGraident(elem,'fill',type);$j.each(elem.childNodes,function(i,child){flipGradients(child,type);});}
function flipGraident(elem,brushType,flipType)
{}
return{name:"Flip tools",svgicons:svgEditor.curConfig.extPath+"ext-fliptools-icon.xml",buttons:[{id:"tool_flipHoriz",type:"context",panel:"fliptool_panel",title:"Flip Horizontal",events:{'click':function(){flipElement('-');}}},{id:"tool_flipVert",type:"context",panel:"fliptool_panel",title:"Flip Vertical",events:{'click':function(){flipElement('|');}}}],selectedChanged:function(opts)
{var currentMode=svgCanvas.getMode();selElems=opts.elems;selElemsb=opts.elems;if((opts.multiselected||opts.selectedElement)&&currentMode!='pathedit')
showPanel(true);else
showPanel(false);}};});